<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
><head>
  <title>
    Matt Broberg
      |
      My How-to for the Snap Telemetry Framework


    

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.93.3" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta
    name="description"
    content="
      Matt is an advocate for open source software. He specializes in designing technology communities that develop products and content in a way that tells a powerful story.


    "
  />
  
  
  
  <link
    rel="stylesheet"
    href="/css/main.min.6b6216cbca690986c821055feb84deac8cfba07e3d1deec188cdc8ae6582c27d.css"
    integrity="sha256-a2IWy8ppCYbIIQVf64TerIz7oH49He7BiM3IrmWCwn0="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css"
    integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
  
    
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit&amp;display=swap" rel="stylesheet" />
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="/how-to-snap-telemetry/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js"
    integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.65e936b591bf81484a5ac438c8e4ae6454fb25516d58ce911e4888d7f230bdc5.js"
      integrity="sha256-Zek2tZG/gUhKWsQ4yOSuZFT7JVFtWM6RHkiI1/IwvcU="
      crossorigin="anonymous"
    ></script>

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="My How-to for the Snap Telemetry Framework"/>
<meta name="twitter:description" content="Updated November 30th, 2016 Today was the announcement that Snap reached a 1."/>



  


  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "articles",
        "name": "My How-to for the Snap Telemetry Framework",
        "headline": "My How-to for the Snap Telemetry Framework",
        "alternativeHeadline": "",
        "description": "
      
        Updated November 30th, 2016 Today was the announcement that Snap reached a 1.


      


    ",
        "inLanguage": "en",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/mbbroberg.fun\/how-to-snap-telemetry\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Matt Broberg"
        },
        "creator" : {
            "@type": "Person",
            "name": "Matt Broberg"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Matt Broberg"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Matt Broberg"
        },
        "copyrightYear" : "2016",
        "dateCreated": "2016-03-22T00:00:00.00Z",
        "datePublished": "2016-03-22T00:00:00.00Z",
        "dateModified": "2016-03-22T00:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Matt Broberg",
            "url": "https://mbbroberg.fun",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/mbbroberg.fun\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "https:\/\/mbbroberg.fun\/how-to-snap-telemetry\/",
        "wordCount" : "775",
        "genre" : [ ],
        "keywords" : [ ]
    }
  </script>



</head>
<body>
    <header><div
  class="page-top 
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
  <nav>
    <ul class="nav__list" id="navMenu">
      <div class="nav__links">
        
        
          
          <li>
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/articles/"
              
              title=""
              >Articles</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/podcasts/"
              
              title=""
              >Podcasts</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/talks/"
              
              title=""
              >Talks</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/tools/"
              
              title=""
              >Tools</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/discgolf/"
              
              title=""
              >Disc</a
            >
          </li>

        
      </div>
      <ul>
        
        
          <li>
            <a class="theme-switch" title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </li>

        
      </ul>
    </ul>
  </nav>
</div>
</header>
    <div class="wrapper">
      <aside><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="logo-title">
      <div class="title">
        <img src="/images/profile.jpg" alt="profile picture" />
        <h3 title=""><a href="/">Matthew Broberg</a></h3>
        <div class="description">
          <p>Matt is an advocate for open source software. He specializes in designing technology communities that develop products and content in a way that tells a powerful story.</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
      
        <li>
          <a href="https://twitter.com/mbbroberg/" rel="me" aria-label="Twitter" title="Twitter">
            <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="https://linkedin.com/in/mbbroberg/" rel="me" aria-label="Linkedin" title="Linkedin">
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="mailto:matthewbbroberg&#43;io@gmail.com" rel="me" aria-label="e-mail" title="e-mail">
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="https://github.com/mbbroberg/" rel="me" aria-label="GitHub" title="GitHub">
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="https://stackoverflow.com/users/581665/mbb" rel="me" aria-label="Stackoverflow" title="Stackoverflow">
            <i class="fab fa-stackoverflow fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer--sidebar">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Matt Broberg
          2022


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.4a40b20209bc12e56cf77caff5feaa93fecd6b0d97d51b33afb0265a732ce636.js"
    integrity="sha256-SkCyAgm8EuVs93yv9f6qk/7Naw2X1Rszr7AmWnMs5jY="
    crossorigin="anonymous"
  ></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150450064-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</div>
</aside>
      <main>
        <div class="autopagerize_page_element">
          <div class="content">
  <div
    class="post 
      animated fadeInDown

    "
  >
    <div class="post-content">
      
      <div class="post-title">
        <h1>My How-to for the Snap Telemetry Framework</h1>
        
      </div><h4 id="updated-november-30th-2016">Updated November 30th, 2016</h4>
<p>Today was <a href="https://itpeernetwork.intel.com/announcing-snap-1-0/">the announcement</a> that Snap reached a 1.0.0 release. On our journey toward this milestone, we did a rename of the binaries used in Snap (<em>snapd</em> is now <em>snapteld</em> and <em>snapctl</em> is <em>snaptel</em>) to avoid a conflict with another package. Since this post is the most popular of our series on Snap, so I updated it given this change. Enjoy!</p>
<p>I was fortunate enough to be part of the release of <a href="https://github.com/intelsdi-x/snap">Snap, an open telemetry framework</a>, a few months ago and the feedback has been phenomenal.</p>
<blockquote>
<p><a href="https://twitter.com/cpswan/status/672090687345729536"></a>Organizations big and small see opportunity in a <strong>single API</strong> to manage any and all layers of their data center metrics. One-on-one conversations have been productive — I love those moments when the idea of snap clicks in as we discuss telemetry and its value in mass. Eyes widen. Data pipelines are whiteboarded. Everyone leaves happier after we discuss it.</p>
</blockquote>
<p><img src="/img/1*RJF5nIkG1YCo7sRpwEnV1Q.png" alt="">The workflow snap is designed to capture. The left-hand side is raw potential that, by the time it reaches the right-hand side, is a filtered and domain-specific dashboards of valuable insights. That is the big picture goal — we flow from collection, we do some level of processing on that raw value and then we publish what is valuable to the right audience in the right way.I could, however, do better at sharing that story beyond the one-on-ones and to the rest of us out here. Let’s fix this with a no assumptions introduction. We can talk telemetry later: let’s get Snap running right away.</p>
<h3 id="download-and-run-snaptel">Download and Run snaptel</h3>
<p>When you want to start using Snap, you start with the Snap daemon, <em>snapteld</em>. Each version is hosted on GitHub under the repositories <a href="https://github.com/intelsdi-x/snap/releases">releases tab</a> as shown in the video below. As of today, you can pull the latest build, <em>now 1.0.0</em>, and get up and running with just a download. Packages are also <a href="http://snap-telemetry.io/download">available here</a>. If you’re beginning with Snap, start simple and give this a watch:</p>
<p>Note as of Nov 30th — the binaries have changed from snapd and snapctl to snapteld and snaptel. Everything else in this video still works!The take home notes I like to highlight:</p>
<ul>
<li>You don’t need to write Go code to use Snap</li>
<li><em>snapteld</em> is designed with security concerns in mind, so plugin trust levels are always required (Disabled, Enabled, Warning) through the CLI or configuration files</li>
<li>The plugins provide by the team are not cryptographically signed at this time, so we need to run at trust-level 0</li>
<li>Run *snaptel *to communicate with <em>snapteld</em>, or use the <a href="https://github.com/intelsdi-x/snap/blob/master/docs/REST_API.md">REST API</a> directly</li>
</ul>
<h3 id="load-some-plugins">Load Some Plugins</h3>
<p>Running <em>snapteld</em> is a prerequisite to doing anything interesting, but the daemon doesn’t do anything until we plug in some plugins and a workflow for them.</p>
<p><img src="/img/1*hi1Z1RXtAUP0N8G-X1A6SQ.png" alt="">snapteld gives you the potential to achieve this: the workflow of snap is designed with Collection, Processing and Publishing in mind as modular and decoupled phases, each with its own plugin. After publishing, information could be pulled into any downstream service.A Task Manifest is the declarative expression of a workflow, written in JSON or YAML, that uses plugins to collect, process (optional) and publish metrics. I load 3 plugins and use the following Task Manifest for them in the next video. Here’s the YAML for it:</p>
<hr>
<h2 id="process">version: 1<br>
schedule:<br>
type: &ldquo;simple&rdquo;<br>
interval: &ldquo;1s&rdquo;<br>
workflow:<br>
collect:<br>
metrics:<br>
/intel/mock/foo: {}<br>
/intel/mock/bar: {}<br>
/intel/mock/*/baz: {}<br>
config:<br>
/intel/mock:<br>
user: &ldquo;root&rdquo;<br>
password: &ldquo;secret&rdquo;<br>
process:</h2>
<h2 id="publish">plugin_name: &ldquo;passthru&rdquo;<br>
process: null<br>
publish:</h2>
<p>plugin_name: &ldquo;file&rdquo;<br>
config:<br>
file: &ldquo;/tmp/snap_published_mock_file.log&quot;And here’s the video:</p>
<p>Again: Note as of Nov 30th — the binaries have changed from snapd and snapctl to snapteld and snaptel. Everything else in this video still works!The takeaway points are:</p>
<ul>
<li>Plugins are binaries loaded into <em>snapteld</em> instances based on their path</li>
<li>Upon loading plugins, metrics become available to collect</li>
<li>Plugins collect, process and publish as defined by a <em>workflow</em> expressed in* <em>a</em> Task Manifest*</li>
</ul>
<h3 id="watching-telemetry-fly-in">Watching Telemetry Fly In</h3>
<p>If you followed along, you’ve run the Snap daemon, understood its required flags, loaded plugins and created a task that leverages them. That’s pretty cool for a few reasons:</p>
<ul>
<li>I can continually read and write telemetry and know it’s managed by <em>snapteld</em></li>
<li>I can add further tasks to read and write telemetry without disrupting my current tasks
All these concepts are nice to grasp, but they make more sense when you use them yourself. Keep familiarizing yourself with <a href="https://github.com/intelsdi-x/snap/tree/master/examples/tasks">further example tasks</a>, then run *task watch *to monitor live telemetry. Keep exploring the <a href="https://github.com/intelsdi-x/snap/blob/master/docs/PLUGIN_CATALOG.md">current plugins in the catalog</a> or <a href="https://github.com/intelsdi-x/snap/blob/master/docs/PLUGIN_AUTHORING.md">start writing your own</a>. If you decide to do either, chat with me about it <a href="http://twitter.com/mjbrender">on Twitter</a> and the rest of the team <a href="http://slack.snap-telemetry.io/">on Slack</a>.</li>
</ul>
<p><em>This article was originally published <a href="https://medium.com/@mbbroberg">on Medium</a></em></p>
</div>
    <div class="post-footer">
      <div class="info">
        

        
      </div>
    </div>

    
  </div>


          </div>
        </div>
      </main>
    </div><footer class="footer footer--base">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Matt Broberg
          2022


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.4a40b20209bc12e56cf77caff5feaa93fecd6b0d97d51b33afb0265a732ce636.js"
    integrity="sha256-SkCyAgm8EuVs93yv9f6qk/7Naw2X1Rszr7AmWnMs5jY="
    crossorigin="anonymous"
  ></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-150450064-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</body>
</html>
