{{- /*
Garden Breadcrumbs Partial
Displays hierarchical navigation path for garden pages
Example: Garden > Philosophy > Nietzsche's 4 Errors
*/ -}}

{{- if eq .Type "garden" -}}
<nav class="garden-breadcrumbs" aria-label="Breadcrumb navigation">
  <ol class="breadcrumb-list">

    {{- /* Build path from ancestors */ -}}
    {{- $ancestors := slice -}}
    {{- $current := . -}}
    
    {{- /* Collect all ancestors */ -}}
    {{- range $current.Ancestors.Reverse -}}
      {{- if ne .Kind "home" -}}
        {{- if ne .Kind "section" -}}
          {{- $ancestors = $ancestors | append . -}}
        {{- else if eq .Type "garden" -}}
          {{- /* Only include garden section ancestors, not the main garden section */ -}}
          {{- if ne .File.Path "garden/_index.md" -}}
            {{- $ancestors = $ancestors | append . -}}
          {{- end -}}
        {{- end -}}
      {{- end -}}
    {{- end -}}

    {{- /* Display ancestor breadcrumbs (folders/categories) */ -}}
    {{- range $ancestors -}}
      <li class="breadcrumb-separator" aria-hidden="true">‚ùØ</li>
      <li class="breadcrumb-item">
        <a href="{{ .RelPermalink }}" class="breadcrumb-link">
          <span class="breadcrumb-icon">üìÅ</span>
          <span class="breadcrumb-text">{{ .Title }}</span>
        </a>
      </li>
    {{- end -}}

    {{- /* Current page (if not an index page) */ -}}
    {{- if not .IsNode -}}
      <li class="breadcrumb-separator" aria-hidden="true">‚ùØ</li>
      <li class="breadcrumb-item breadcrumb-current" aria-current="page">
        <span class="breadcrumb-text">{{ .Title }}</span>
      </li>
    {{- end -}}
  </ol>
</nav>

<style>
  .garden-breadcrumbs {
    margin: 0 0 2rem 0;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(72, 187, 120, 0.15);
  }

  .breadcrumb-list {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    font-size: 0.95rem;
  }

  .breadcrumb-item {
    display: flex;
    align-items: center;
  }

  .breadcrumb-link {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
    opacity: 0.8;
  }

  .breadcrumb-link:hover {
    background: rgba(72, 187, 120, 0.1);
    opacity: 1;
  }

  .breadcrumb-icon {
    font-size: 1rem;
    line-height: 1;
  }

  .breadcrumb-text {
    line-height: 1;
  }

  .breadcrumb-separator {
    opacity: 0.5;
    font-size: 0.85rem;
    user-select: none;
  }

  .breadcrumb-current .breadcrumb-text {
    font-weight: 600;
    opacity: 1;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .breadcrumb-list {
      font-size: 0.85rem;
      gap: 0.35rem;
    }

    .breadcrumb-icon {
      font-size: 0.9rem;
    }

    .breadcrumb-link {
      padding: 0.2rem 0.4rem;
    }
  }
</style>
{{- end -}}

